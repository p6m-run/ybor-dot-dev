---
import type { ProcessedSection } from "@/types/contentful-v2";
import { ArrowRightIcon } from "@lucide/astro";
import Section from "@/components/Section.astro";
import { documentToHtmlString } from "@contentful/rich-text-html-renderer";
import UseCasesTabs from "@/components/UseCasesTabs";
import { cn } from "@/lib/utils";

interface Props {
  section: ProcessedSection;
  color: string;
}

const { section, color } = Astro.props;

const summarizedPrinciples = section.items?.map(
    (item) => {
        return {
            title: item.title,
            description: (item.metadata as any)?.summary || '',
        };
    }
);

---

<Section title={section.title || ""}>
  <div class="flex flex-col md:flex-row justify-between md:items-center gap-8 mb-8">
    {
      section.headline && (
        <h2 class="text-3xl md:text-4xl font-medium md:mb-6 max-w-sm">
          {section.headline}
        </h2>
      )
    }

    <div
    class={
      cn("rounded-full flex items-center justify-center w-8 h-8 transform rotate-90 md:rotate-0", {
        "bg-brand-yellow": color === "brand-yellow",
        "bg-brand-blue": color === "brand-blue",
        "bg-brand-orange": color === "brand-orange",
        "bg-brand-purple": color === "brand-purple",
        "bg-brand-green": color === "brand-green",
      })
    }
    >
      <ArrowRightIcon class="current-color w-4 h-4 mx-2" />
    </div>

    {
      section.description && (
        <div
          class="max-w-lg font-mono text-sm text-foreground"
          set:html={documentToHtmlString(section.description)}
        />
      )
    }
  </div>

  <div class="my-8">
    {summarizedPrinciples && summarizedPrinciples.length > 0 && (
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
        {summarizedPrinciples.map((principle) => (
          <div class="border border-gray-900 rounded-lg p-4 bg-background">
            <h3 class="text-xl mb-4">{principle.title}</h3>
            <p class="text-xs text-muted-foreground font-mono">{principle.description}</p>
          </div>
        ))}
      </div>
    )}
  </div>

  <div class="my-8">
    {section.items && section.items.length > 0 && (
      <UseCasesTabs useCases={section.items} color={color} showCta={false} client:only="react" />
    )}
  </div>
</Section>
