---
import type { ProcessedSection } from "@/types/contentful-v2";
import { ArrowDownIcon, ArrowRightIcon } from "@lucide/astro";
import { documentToHtmlString } from "@contentful/rich-text-html-renderer";
import SecurityFeaturesTabs from "@/components/SecurityFeaturesTabs";
import { cn } from "@/lib/utils";

interface Props {
  section: ProcessedSection;
  color: string;
  slug: string;
}

const { section, color, slug } = Astro.props;
---

<section class="container mx-auto px-6 py-8">
    <div class="has-circle-end border-l border-gray-900 pb-7">
      <ArrowDownIcon class="w-3 h-3 absolute -bottom-1 -left-[6.5px]" />
      {section.title && (
        <div class="border-gray-900 pl-6 mb-2">
          <div class="font-mono text-sm text-gray-600 -translate-y-2.5">
            {section.title}
          </div>
        </div>
      )}
      <div class="bg-dark-gradient text-white p-6 md:p-12 rounded-lg rounded-l-none">
        <div class="flex flex-col md:flex-row justify-between md:items-center gap-8 md:mb-8">
            {
              section.headline && (
                <h2 class="text-3xl md:text-4xl font-medium md:mb-6 max-w-sm">
                  {section.headline}
                </h2>
              )
            }
        
        <div
        class={cn("rounded-full flex items-center justify-center w-8 h-8 transform rotate-90 md:rotate-0", {
          "bg-brand-yellow": color === "brand-yellow",
          "bg-brand-blue": color === "brand-blue",
          "bg-brand-orange": color === "brand-orange",
          "bg-brand-purple": color === "brand-purple",
          "bg-brand-green": color === "brand-green",
        })}
      >
        <ArrowRightIcon class="text-primary w-4 h-4 mx-2" />
      </div>
        
            {
              section.description && (
                <div
                  class="max-w-lg font-mono text-sm text-white"
                  set:html={documentToHtmlString(section.description)}
                />
              )
            }
          </div>
          <hr class="hidden lg:block opacity-10 border-white" />
          <div class="my-8">
            {section.items && section.items.length > 0 && (
              <SecurityFeaturesTabs useCases={section.items} color={color} slug={slug} client:only="react" />
            )}
          </div>
      </div>
    </div>

  </section>
