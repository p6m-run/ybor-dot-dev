---
import type { ProcessedSection } from '@/types/contentful-v2';
import { ArrowDownIcon } from 'lucide-react';
import { documentToHtmlString } from '@contentful/rich-text-html-renderer';
import { decodeHtmlEntities } from '@/lib/utils';

interface Props {
  section: ProcessedSection;
}

const { section } = Astro.props;

// Process description if it's rich text
const description = typeof section.description === 'string' 
  ? section.description 
  : section.description 
    ? decodeHtmlEntities(documentToHtmlString(section.description))
    : '';
---

<section class="container mx-auto px-6 py-8">
  <div class="has-circle-end border-l border-gray-900 pb-7">
    <ArrowDownIcon className="w-3 h-3 absolute -bottom-1 -left-[6.5px]" />
    {section.title && (
      <div class="border-gray-900 pl-6 mb-2">
        <div class="font-mono text-sm text-gray-600 -translate-y-2.5">
          {section.title}
        </div>
      </div>
    )}
    <div class="bg-dark-gradient text-white p-12 rounded-lg rounded-l-none">
      {section.headline && (
        <h2 class="text-3xl md:text-4xl font-medium mb-6">
          {section.headline}
        </h2>
      )}
      {description && (
        <div class="font-mono text-sm text-gray-300 space-y-1" set:html={description} />
      )}
    </div>
  </div>
</section>

