---
import type { ProcessedSection } from "@/types/contentful-v2";
import { Image } from "astro:assets";
import { ArrowRightIcon } from "@lucide/astro";
import Section from "@/components/Section.astro";
import { documentToHtmlString } from "@contentful/rich-text-html-renderer";
import YedeCapabilitiesImage from "@/assets/y-ede-capabilities.svg";
import YHomeCapabilitiesImage from "@/assets/ybor-home-capabilities.svg";
import { cn } from "@/lib/utils";
import YInfraCapabilitiesImage from "@/assets/y-infra-capabilities.svg";
import YAppCapabilitiesImage from "@/assets/y-app-capabilities.svg";
import YAiCapabilitiesImage from "@/assets/y-ai-capabilities.svg";

interface Props {
  section: ProcessedSection;
  color: string;
  slug: string;
}

const { section, color, slug } = Astro.props;
---

<Section title={section.title || ""}>
  <div class="flex justify-between items-center gap-8 mb-8">
    {
      section.headline && (
        <h2 class="text-3xl md:text-4xl font-medium mb-6 max-w-sm">
          {section.headline}
        </h2>
      )
    }

    <div
      class={cn("rounded-full flex items-center justify-center w-8 h-8", {
        "bg-brand-yellow": color === "brand-yellow",
        "bg-brand-blue": color === "brand-blue",
        "bg-brand-orange": color === "brand-orange",
        "bg-brand-purple": color === "brand-purple",
        "bg-brand-green": color === "brand-green",
      })}
    >
      <ArrowRightIcon class="current-color w-4 h-4 mx-2" />
    </div>

    {
      section.description && (
        <div
          class="max-w-lg font-mono text-sm text-foreground"
          set:html={documentToHtmlString(section.description)}
        />
      )
    }
  </div>

  <div class="my-8">
    {
      slug && slug === "/" && (
        <Image
          src={YHomeCapabilitiesImage}
          alt="Ybor Capabilities"
          class="w-full"
        />
      )
    }
    {
      slug === "/products/ede" && (
        <Image
          src={YedeCapabilitiesImage}
          alt="Y_EDE Capabilities"
          class="w-full"
        />
      )
    }
    {
      slug === "/products/infra" && (
        <Image
          src={YInfraCapabilitiesImage}
          alt="Y_Infra Capabilities"
          class="w-full"
        />
      )
    }
    {
      slug === "/products/app" && (
        <Image
          src={YAppCapabilitiesImage}
          alt="Y_App Capabilities"
          class="w-full"
        />
      )
    }
    {
      slug === "/products/ai" && (
        <Image
          src={YAiCapabilitiesImage}
          alt="Y_AI Capabilities"
          class="w-full"
        />
      )
    }
  </div>

  <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
    {
      section.items?.map((capability) => (
        <div class="">
          {capability.title && (
            <h3 class="text-lg font-medium mb-2">{capability.title}</h3>
          )}

          {capability.description && (
            <div
              class="text-sm text-gray-600 font-mono"
              set:html={documentToHtmlString(capability.description)}
            />
          )}
        </div>
      ))
    }
  </div>
</Section>
