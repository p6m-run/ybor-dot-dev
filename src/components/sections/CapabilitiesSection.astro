---
import type { ProcessedSection } from '@/types/contentful-v2';
import { ArrowRightIcon } from 'lucide-react';
import Section from '@/components/Section.astro';
import { documentToHtmlString } from '@contentful/rich-text-html-renderer';

interface Props {
  section: ProcessedSection;
}

const { section } = Astro.props;
---

<Section title={section.title || ''}>
  <div class="flex justify-between items-center gap-8 mb-8">
    {section.headline && (
      <h2 class="text-3xl md:text-4xl font-medium mb-6 max-w-sm">
        {section.headline}
      </h2>
    )}
    
    <div class="rounded-full bg-brand-purple flex items-center justify-center w-8 h-8">
      <ArrowRightIcon className="current-color w-4 h-4 mx-2" />
    </div>

    {section.description && (
      <div class="max-w-lg font-mono">
        {typeof section.description === 'string' 
          ? section.description 
          : documentToHtmlString(section.description)}
      </div>
    )}
  </div>

  <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
    {section.items?.map((capability) => (
      <div class="border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow">
        {capability.icon && (
          <div class="mb-4">
            <img src={capability.icon} alt="" class="w-12 h-12" />
          </div>
        )}
        
        {capability.title && (
          <h3 class="text-lg font-semibold mb-2">{capability.title}</h3>
        )}
        
        {capability.description && (
          <div class="text-sm text-gray-600 font-mono">
            {typeof capability.description === 'string' 
              ? capability.description 
              : documentToHtmlString(capability.description)}
          </div>
        )}
        
        {capability.url && (
          <a 
            href={capability.url}
            class="inline-flex items-center text-sm font-medium text-brand-purple hover:underline mt-4"
          >
            Learn more
            <ArrowRightIcon className="w-4 h-4 ml-1" />
          </a>
        )}
      </div>
    ))}
  </div>
</Section>

