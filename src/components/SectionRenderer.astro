---
/**
 * SectionRenderer - Generic section renderer for the new flexible architecture
 * 
 * This component maps section types to their corresponding section components.
 * It acts as a router, rendering the appropriate section component based on the section type.
 */

import type { ProcessedSection } from '@/types/contentful-v2';

// Import all section components
import HeroSection from './sections/HeroSection.astro';
import MissionSection from './sections/MissionSection.astro';
import ChallengesSection from './sections/ChallengesSection.astro';
import PlatformSection from './sections/PlatformSection.astro';
import BusinessImpactSection from './sections/BusinessImpactSection.astro';
import ProductSuiteSection from './sections/ProductSuiteSection.astro';
import TestimonialsSection from './sections/TestimonialsSection.astro';
import CertificationsSection from './sections/CertificationsSection.astro';
import ContactSection from './sections/ContactSection.astro';
import CapabilitiesSection from './sections/CapabilitiesSection.astro';

interface Props {
  section: ProcessedSection;
}

const { section } = Astro.props;

// Map section types to their corresponding components
const sectionComponents = {
  hero: HeroSection,
  mission: MissionSection,
  challenges: ChallengesSection,
  platform: PlatformSection,
  'business-impact': BusinessImpactSection,
  'product-suite': ProductSuiteSection,
  testimonials: TestimonialsSection,
  certifications: CertificationsSection,
  contact: ContactSection,
  capabilities: CapabilitiesSection,
  features: PlatformSection, // Reuse platform section for features
  cta: ContactSection, // Reuse contact section for CTA
} as const;

// Get the component for this section type
const Component = sectionComponents[section.type];

// Log warning if unknown section type
if (!Component) {
  console.warn(`Unknown section type: ${section.type} (section: ${section.internalName})`);
}
---

{Component ? (
  <Component section={section} />
) : (
  <div class="container mx-auto px-6 py-8">
    <div class="border border-red-200 bg-red-50 rounded-lg p-6">
      <h3 class="text-red-800 font-semibold mb-2">Unknown Section Type</h3>
      <p class="text-red-600 text-sm">
        Section type "<strong>{section.type}</strong>" is not recognized.
        <br />
        Internal name: {section.internalName}
      </p>
    </div>
  </div>
)}

